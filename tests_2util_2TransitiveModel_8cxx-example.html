<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cytopia: tests/util/TransitiveModel.cxx</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="Doc-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cytopia_icon_iso.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cytopia
   &#160;<span id="projectnumber">0.3</span>
   </div>
   <div id="projectbrief">A city building simulation game</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('tests_2util_2TransitiveModel_8cxx-example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">tests/util/TransitiveModel.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;catch2/catch.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;bitset&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TransitiveModel_8hxx.html">TransitiveModel.hxx</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="IEquatable_8hxx.html">IEquatable.hxx</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span>Catch::Matchers;</div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">using</span> vector = std::vector&lt;T&gt;;</div><div class="line"><span class="keyword">using</span> <a class="code" href="Game_8hxx.html#a4f14f3b57f29f85074f351ee815758ae">RuntimeError</a> = std::runtime_error;</div><div class="line"></div><div class="line"><span class="comment">/* This is our data model for a Button */</span></div><div class="line"><span class="keyword">struct </span>ButtonModel</div><div class="line">{</div><div class="line">  <span class="keyword">enum</span> Operations</div><div class="line">  {</div><div class="line">    CLICK,</div><div class="line">    HOVER,</div><div class="line">    DISABLE,</div><div class="line">    DISPLAY,</div><div class="line">    VIEW,</div><div class="line">    ANIMATE,</div><div class="line">    FOCUS,</div><div class="line">    PRESS,</div><div class="line">    ACTIVATE</div><div class="line">  };</div><div class="line"></div><div class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">struct </span>BaseButtonData : <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="classIEquatable.html">IEquatable</a>&lt;T&gt;</div><div class="line">  {</div><div class="line">    <span class="keyword">using</span> MyModelType = ButtonModel;</div><div class="line">    BaseButtonData() { this-&gt;onHashChanged(); }</div><div class="line"></div><div class="line">  <span class="keyword">private</span>:</div><div class="line">    std::size_t Hash() <span class="keyword">const</span> noexcept { <span class="keywordflow">return</span> 0; }</div><div class="line">    <span class="keyword">friend</span> <a class="code" href="classIEquatable.html">IEquatable&lt;T&gt;</a>;</div><div class="line">  };</div><div class="line"></div><div class="line">  <span class="keyword">struct </span>ClickData : <span class="keyword">public</span> BaseButtonData&lt;ClickData&gt;</div><div class="line">  {</div><div class="line">  };</div><div class="line">  <span class="keyword">struct </span>HoverData : <span class="keyword">public</span> BaseButtonData&lt;HoverData&gt;</div><div class="line">  {</div><div class="line">  };</div><div class="line">  <span class="keyword">struct </span>DisableData : <span class="keyword">public</span> BaseButtonData&lt;DisableData&gt;</div><div class="line">  {</div><div class="line">  };</div><div class="line">  <span class="keyword">struct </span>DisplayData : <span class="keyword">public</span> BaseButtonData&lt;DisplayData&gt;</div><div class="line">  {</div><div class="line">  };</div><div class="line">  <span class="keyword">struct </span>ViewData : <span class="keyword">public</span> BaseButtonData&lt;ViewData&gt;</div><div class="line">  {</div><div class="line">  };</div><div class="line">  <span class="keyword">struct </span>AnimateData : <span class="keyword">public</span> BaseButtonData&lt;AnimateData&gt;</div><div class="line">  {</div><div class="line">  };</div><div class="line">  <span class="keyword">struct </span>FocusData : <span class="keyword">public</span> BaseButtonData&lt;FocusData&gt;</div><div class="line">  {</div><div class="line">  };</div><div class="line">  <span class="keyword">struct </span>PressData : <span class="keyword">public</span> BaseButtonData&lt;PressData&gt;</div><div class="line">  {</div><div class="line">  };</div><div class="line">  <span class="keyword">struct </span>ActivateData : <span class="keyword">public</span> BaseButtonData&lt;ActivateData&gt;</div><div class="line">  {</div><div class="line">  };</div><div class="line"></div><div class="line">  <span class="keyword">using</span> OperationTypes =</div><div class="line">      <a name="_a1"></a><a class="code" href="structTypeList.html">TypeList&lt;ClickData, HoverData, DisableData, DisplayData, ViewData, AnimateData, FocusData, PressData, ActivateData&gt;</a>;</div><div class="line">  <span class="comment">/* This is our data representation</span></div><div class="line"><span class="comment">   * Bit 0: Is the button active</span></div><div class="line"><span class="comment">   * Bit 1: Is the button hovered</span></div><div class="line"><span class="comment">   * Bit 2: Is the button disabled</span></div><div class="line"><span class="comment">   * Bit 3: Is the button displayed</span></div><div class="line"><span class="comment">   * Bit 4: Is the button visible</span></div><div class="line"><span class="comment">   * Bit 5: Is the button being animated</span></div><div class="line"><span class="comment">   * Bit 6: Is the button being focused</span></div><div class="line"><span class="comment">   * Bit 7: Is the button being pressed</span></div><div class="line"><span class="comment">   * Bit 8: Is the button</span></div><div class="line"><span class="comment">   * m_text: The display text</span></div><div class="line"><span class="comment">   * Why do we even bother with all these unused bits?</span></div><div class="line"><span class="comment">   * Well it&#39;s better to use a multiple of 8 bits</span></div><div class="line"><span class="comment">   * because the smallest possible chunk of data</span></div><div class="line"><span class="comment">   * in memory is 1 byte. Even a bool is 1 byte.</span></div><div class="line"><span class="comment">   * */</span></div><div class="line">  std::bitset&lt;8&gt; m_flags;</div><div class="line">  <a name="a2"></a><a class="code" href="AudioConfig_8hxx.html#aca454f84dd198a937af6499dd758aa3d">std::string</a> m_text;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* This is our state for a Button</span></div><div class="line"><span class="comment"> * One of the advantages of TransitiveModels</span></div><div class="line"><span class="comment"> * is that we could implement many different states</span></div><div class="line"><span class="comment"> * which all use the same ButtonModel, but triggers</span></div><div class="line"><span class="comment"> * events differently. Moreover, our Observers</span></div><div class="line"><span class="comment"> * would work for all of these different states. */</span></div><div class="line"><span class="keyword">class </span>TestButton : <span class="keyword">public</span> <a name="_a3"></a><a class="code" href="classTransitiveModel.html">TransitiveModel</a>&lt;ButtonModel&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="comment">/* Here, we implement the operations */</span></div><div class="line">  <span class="keywordtype">void</span> click(<span class="keywordtype">void</span>) noexcept</div><div class="line">  {</div><div class="line">    notifyObservers(<a name="_a4"></a><a class="code" href="structTransition.html">Transition</a>{ClickData{}});</div><div class="line">    <span class="comment">/* When we click, we mark our button as &quot;active&quot; */</span></div><div class="line">    <span class="keywordflow">if</span> (not m_flags[0])</div><div class="line">    {</div><div class="line">      m_flags |= 0x1 &lt;&lt; 0;</div><div class="line">      notifyObservers(<a class="code" href="structTransition.html">Transition</a>{ActivateData{}});</div><div class="line">    }</div><div class="line">    <span class="comment">/* When we click, we mark our button as &quot;hovered&quot; */</span></div><div class="line">    <span class="keywordflow">if</span> (not m_flags[1])</div><div class="line">    {</div><div class="line">      m_flags |= 0x1 &lt;&lt; 1;</div><div class="line">      notifyObservers(<a class="code" href="structTransition.html">Transition</a>{HoverData{}});</div><div class="line">    }</div><div class="line">    <span class="comment">/* When we click, we mark our button as &quot;focused&quot; */</span></div><div class="line">    <span class="keywordflow">if</span> (not m_flags[6])</div><div class="line">    {</div><div class="line">      m_flags |= 0x1 &lt;&lt; 6;</div><div class="line">      notifyObservers(<a class="code" href="structTransition.html">Transition</a>{FocusData{}});</div><div class="line">    }</div><div class="line">  }</div><div class="line">  <span class="comment">/* Typically add all other possible operations here */</span></div><div class="line">};</div><div class="line"></div><div class="line">std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const Transition&lt;ButtonModel&gt; &amp;transition)</div><div class="line">{</div><div class="line">  std::vector&lt;std::string&gt; names = {<span class="stringliteral">&quot;CLICK&quot;</span>, <span class="stringliteral">&quot;HOVER&quot;</span>, <span class="stringliteral">&quot;DISABLE&quot;</span>, <span class="stringliteral">&quot;DISPLAY&quot;</span>, <span class="stringliteral">&quot;VIEW&quot;</span>, <span class="stringliteral">&quot;ANIMATE&quot;</span>, <span class="stringliteral">&quot;FOCUS&quot;</span>, <span class="stringliteral">&quot;PRESS&quot;</span>, <span class="stringliteral">&quot;ACTIVATE&quot;</span>};</div><div class="line">  os &lt;&lt; names.at(transition.getType());</div><div class="line">  <span class="keywordflow">return</span> os;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This is another button that</span></div><div class="line"><span class="comment"> * can be either toggled or not. It can also be</span></div><div class="line"><span class="comment"> * disabled</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">class </span>ToggleTestButton : <span class="keyword">public</span> <a class="code" href="classTransitiveModel.html">TransitiveModel</a>&lt;ButtonModel&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keywordtype">void</span> click(<span class="keywordtype">void</span>) noexcept</div><div class="line">  {</div><div class="line">    <span class="comment">/* We can only toggle if it&#39;s not disabled */</span></div><div class="line">    <span class="keywordflow">if</span> (not m_flags[2])</div><div class="line">    {</div><div class="line">      m_flags[2].flip();</div><div class="line">    }</div><div class="line">    notifyObservers(<a class="code" href="structTransition.html">Transition</a>{PressData{}});</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> disable(<span class="keywordtype">bool</span> isDisabled) noexcept</div><div class="line">  {</div><div class="line">    <span class="keywordflow">if</span> (isDisabled != m_flags[2])</div><div class="line">    {</div><div class="line">      m_flags[2] = isDisabled;</div><div class="line">      notifyObservers(<a class="code" href="structTransition.html">Transition</a>{DisableData{}});</div><div class="line">    }</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* If we wanted to reunite all of these buttons into</span></div><div class="line"><span class="comment"> * a common interface, we could create iClickable</span></div><div class="line"><span class="comment"> * struct iClickable { void click(void) noexcept = 0; };</span></div><div class="line"><span class="comment"> * and make all these models implement iClickable</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="comment">/* This is a Button view that would implement the model completely */</span></div><div class="line"><span class="keyword">class </span>CompleteButtonView : <span class="keyword">public</span> vector&lt;Transition&lt;ButtonModel&gt;&gt;</div><div class="line">{</div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <span class="keyword">struct </span>Listener : <a name="_a5"></a><a class="code" href="classObserver.html">Observer</a>&lt;Transition&lt;ButtonModel&gt;&gt;</div><div class="line">  {</div><div class="line">    CompleteButtonView &amp;m_Parent;</div><div class="line">    <span class="keyword">explicit</span> Listener(CompleteButtonView &amp;Parent) : m_Parent(Parent) {}</div><div class="line">    <span class="keywordtype">void</span> update(<a class="code" href="structTransition.html">Transition&lt;ButtonModel&gt;</a> event) noexcept <span class="keyword">final</span></div><div class="line">    {</div><div class="line">      <span class="keywordflow">switch</span> (event.<a name="a6"></a><a class="code" href="structTransition.html#a0528f050e14114debac26dff023a84a1">getType</a>())</div><div class="line">      {</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::CLICK:</div><div class="line">        [[fallthrough]];</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::HOVER:</div><div class="line">        [[fallthrough]];</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::DISABLE:</div><div class="line">        [[fallthrough]];</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::DISPLAY:</div><div class="line">        [[fallthrough]];</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::VIEW:</div><div class="line">        [[fallthrough]];</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::ANIMATE:</div><div class="line">        [[fallthrough]];</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::FOCUS:</div><div class="line">        [[fallthrough]];</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::PRESS:</div><div class="line">        [[fallthrough]];</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::ACTIVATE:</div><div class="line">      {</div><div class="line">        <span class="comment">/* Here we would repaint our View for each different</span></div><div class="line"><span class="comment">           * event. If that&#39;s not possible without repainting</span></div><div class="line"><span class="comment">           * everything, we can keep a local copy of</span></div><div class="line"><span class="comment">           * parameters in m_Parent and repaint everything */</span></div><div class="line">        m_Parent.push_back(event);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">      <span class="keywordflow">default</span>:</div><div class="line">      {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">      }</div><div class="line">    }</div><div class="line">  };</div><div class="line"></div><div class="line">  <span class="keyword">using</span> ListenerPtr = std::shared_ptr&lt;Listener&gt;;</div><div class="line">  ListenerPtr m_Listener;</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">explicit</span> CompleteButtonView(<a class="code" href="classTransitiveModel.html">TransitiveModel&lt;ButtonModel&gt;</a> &amp;model) : m_Listener(std::make_shared&lt;Listener&gt;(*<span class="keyword">this</span>))</div><div class="line">  {</div><div class="line">    <span class="comment">/* this button view subscribes to everything */</span></div><div class="line">    model.<a name="a7"></a><a class="code" href="classTransitiveModel.html#a39952d3b5399c2fe04689853d0145feb">subscribe</a>(m_Listener);</div><div class="line">  }</div><div class="line">  <span class="comment">/* Here there would be other methods</span></div><div class="line"><span class="comment">   * specific to the way this Button should be displayed */</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* This is a Button view that would implement only specific functionality */</span></div><div class="line"><span class="keyword">class </span>SimpleButtonView : <span class="keyword">public</span> vector&lt;Transition&lt;ButtonModel&gt;&gt;</div><div class="line">{</div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <span class="keyword">struct </span>Listener : <a class="code" href="classObserver.html">Observer</a>&lt;Transition&lt;ButtonModel&gt;&gt;</div><div class="line">  {</div><div class="line">    SimpleButtonView &amp;m_Parent;</div><div class="line">    <span class="keyword">explicit</span> Listener(SimpleButtonView &amp;Parent) : m_Parent(Parent) {}</div><div class="line">    <span class="keywordtype">void</span> update(<a class="code" href="structTransition.html">Transition&lt;ButtonModel&gt;</a> event) noexcept <span class="keyword">final</span></div><div class="line">    {</div><div class="line">      <span class="keywordflow">switch</span> (event.<a class="code" href="structTransition.html#a0528f050e14114debac26dff023a84a1">getType</a>())</div><div class="line">      {</div><div class="line">      <span class="keywordflow">case</span> ButtonModel::PRESS:</div><div class="line">      {</div><div class="line">        m_Parent.push_back(event);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">      <span class="keywordflow">default</span>:</div><div class="line">      {</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">      }</div><div class="line">    }</div><div class="line">  };</div><div class="line"></div><div class="line">  <span class="keyword">using</span> ListenerPtr = std::shared_ptr&lt;Listener&gt;;</div><div class="line">  ListenerPtr m_Listener;</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">explicit</span> SimpleButtonView(<a class="code" href="classTransitiveModel.html">TransitiveModel&lt;ButtonModel&gt;</a> &amp;model) : m_Listener(std::make_shared&lt;Listener&gt;(*<span class="keyword">this</span>))</div><div class="line">  {</div><div class="line">    <span class="comment">/* this button view subscribes only to PRESS events */</span></div><div class="line">    model.<a class="code" href="classTransitiveModel.html#a39952d3b5399c2fe04689853d0145feb">subscribe</a>(m_Listener, {ButtonModel::PRESS});</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* We could have more types of ButtonViews here... Like</span></div><div class="line"><span class="comment"> * a RadioButtonView for example.</span></div><div class="line"><span class="comment"> * This means we can have different Views, being updated</span></div><div class="line"><span class="comment"> * on the events they care about, synchronized from the</span></div><div class="line"><span class="comment"> * same data */</span></div><div class="line"></div><div class="line">TEST_CASE(<span class="stringliteral">&quot;I cannot call TransitiveModel::addObserver&quot;</span>, <span class="stringliteral">&quot;[util]&quot;</span>)</div><div class="line">{</div><div class="line">  REQUIRE(!std::is_invocable&lt;TestButton, <a class="code" href="Observer_8hxx.html#a4c3544c88df9b1d1ab80d35d5c722408">ObserverSPtr</a>&lt;<a class="code" href="structTransition.html">Transition&lt;ButtonModel&gt;</a>&gt;&gt;::value);</div><div class="line">}</div><div class="line"></div><div class="line">SCENARIO(<span class="stringliteral">&quot;I can subscribe to all events&quot;</span>, <span class="stringliteral">&quot;[util]&quot;</span>)</div><div class="line">{</div><div class="line">  GIVEN(<span class="stringliteral">&quot;I&#39;m an Observer subscribed to a model for all events&quot;</span>)</div><div class="line">  {</div><div class="line">    TestButton model;</div><div class="line">    CompleteButtonView view(model);</div><div class="line">    REQUIRE(view.size() == 0);</div><div class="line">    WHEN(<span class="stringliteral">&quot;The model sends any event&quot;</span>)</div><div class="line">    {</div><div class="line">      model.click();</div><div class="line">      THEN(<span class="stringliteral">&quot;I receive all events&quot;</span>)</div><div class="line">      {</div><div class="line">        vector&lt;TestButton::Notification&gt; expectedEvents{</div><div class="line">            <a class="code" href="structTransition.html">Transition</a>{ButtonModel::ClickData{}}, <a class="code" href="structTransition.html">Transition</a>{ButtonModel::ActivateData{}}, <a class="code" href="structTransition.html">Transition</a>{ButtonModel::HoverData{}},</div><div class="line">            <a class="code" href="structTransition.html">Transition</a>{ButtonModel::FocusData{}}};</div><div class="line">        REQUIRE_THAT(view, Contains(expectedEvents));</div><div class="line">        REQUIRE(view.size() == 4);</div><div class="line">      }</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div><div class="line"></div><div class="line">SCENARIO(<span class="stringliteral">&quot;I can subscribe to specific events&quot;</span>, <span class="stringliteral">&quot;[util]&quot;</span>)</div><div class="line">{</div><div class="line">  GIVEN(<span class="stringliteral">&quot;I&#39;m an Observer subscribed to a model for specific events&quot;</span>)</div><div class="line">  {</div><div class="line">    ToggleTestButton model;</div><div class="line">    SimpleButtonView view(model);</div><div class="line">    REQUIRE(view.size() == 0);</div><div class="line">    WHEN(<span class="stringliteral">&quot;The model sends an event I&#39;m subscribed to&quot;</span>)</div><div class="line">    {</div><div class="line">      model.click();</div><div class="line">      THEN(<span class="stringliteral">&quot;I receive the event&quot;</span>)</div><div class="line">      {</div><div class="line">        REQUIRE(view.size() == 1);</div><div class="line">        REQUIRE_THAT(view, Contains(vector&lt;TestButton::Notification&gt;{<a class="code" href="structTransition.html">Transition</a>{ButtonModel::PressData{}}}));</div><div class="line">      }</div><div class="line">    }</div><div class="line">    WHEN(<span class="stringliteral">&quot;The model sends an event I&#39;m not subscribed to&quot;</span>)</div><div class="line">    {</div><div class="line">      model.disable(<span class="keyword">true</span>);</div><div class="line">      model.disable(<span class="keyword">false</span>);</div><div class="line">      THEN(<span class="stringliteral">&quot;I don&#39;t receive any event&quot;</span>)</div><div class="line">      {</div><div class="line">        REQUIRE(view.size() == 0);</div><div class="line">        REQUIRE_THAT(view, !Contains(vector&lt;TestButton::Notification&gt;{<a class="code" href="structTransition.html">Transition</a>{ButtonModel::DisableData{}}}));</div><div class="line">      }</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 21 2020 14:20:08 for Cytopia by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
